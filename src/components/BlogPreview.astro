---
import { getCollection } from 'astro:content';
const posts = (await getCollection('blog')).sort((a, b) => new Date(b.data.pubDate).getTime() - new Date(a.data.pubDate).getTime()).slice(0, 3);
---
<section id="blog" class="py-24 md:py-32">
  <div class="max-w-7xl mx-auto px-6">
    <p class="text-accent uppercase tracking-[0.2em] text-sm font-semibold mb-4">Blog</p>
    <div class="flex items-end justify-between mb-12">
      <h2 class="text-4xl md:text-5xl font-black">Latest Thoughts</h2>
      <a href="/blog" class="hidden md:inline-block text-accent hover:text-orange-400 uppercase text-sm tracking-wider font-bold">View All &rarr;</a>
    </div>
    <div class="grid md:grid-cols-3 gap-8">
      {posts.map((post) => (
        <a href={`/blog/${post.id}`} class="group block bg-card border border-white/5 rounded-xl overflow-hidden hover:border-accent/40 transition-all duration-300">
          {post.data.image && (
            <div class="overflow-hidden aspect-video">
              <img src={post.data.image} alt={post.data.title} class="w-full h-full object-cover group-hover:scale-105 transition-transform duration-500" />
            </div>
          )}
          <div class="p-6">
            <p class="text-accent text-xs uppercase tracking-widest font-semibold">{new Date(post.data.pubDate).toLocaleDateString('en-US', { month: 'short', day: 'numeric', year: 'numeric' })}</p>
            <h3 class="text-xl font-bold mt-2 mb-2 group-hover:text-accent transition">{post.data.title}</h3>
            <p class="text-gray-400 text-sm">{post.data.description}</p>
          </div>
        </a>
      ))}
    </div>
    <a href="/blog" class="md:hidden inline-block mt-8 text-accent hover:text-orange-400 uppercase text-sm tracking-wider font-bold">View All &rarr;</a>
  </div>
</section>
